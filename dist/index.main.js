(self["webpackChunkto_do_list_project"] = self["webpackChunkto_do_list_project"] || []).push([["index"],{

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ (() => {

class Todo {
  constructor() {
    this.tasks = [];
  }
  save() {
    localStorage.setItem('localTasks', JSON.stringify(this.tasks));
  }
  addTask = (desc, completed, index) => {
    const task = {
      desc,
      completed,
      index
    };
    this.tasks.push(task);
    this.save();
    window.location.reload();
  };
  showBG = () => {
    const inputForm = document.querySelectorAll('.item');
    inputForm.forEach((item, index) => {
      item.addEventListener('click', () => {
        const itemContent = document.querySelector(`.item${index}`);
        const trashImage = document.querySelector(`.icon-trash${index}`);
        const moreImage = document.querySelector(`.icon-humberger${index}`);
        const selected = document.querySelector('.selected');
        const trashImageActive = document.querySelector('.icon-trash-show');
        const moreImageHide = document.querySelector('.more-image-hide');
        if (selected != null) {
          selected.classList.remove('selected');
          trashImageActive.classList.remove('icon-trash-show');
          moreImageHide.classList.remove('more-image-hide');
        }
        itemContent.classList.add('selected');
        trashImage.classList.add('icon-trash-show');
        moreImage.classList.add('more-image-hide');
      });
    });
  };
  fixLength = () => {
    let lenght = 0;
    this.tasks.forEach(item => {
      this.item.desc = item.desc;
      item.index = lenght;
      this.item.completed = item.completed;
      lenght += 1;
    });
  };
  deleteItem = index => {
    this.tasks = this.tasks.filter((item, i) => i !== index);
    this.fixLength();
    localStorage.setItem('localTasks', JSON.stringify(this.tasks));
    window.location.reload();
  };
  updateList = (desc, index) => {
    this.tasks[index].desc = desc;
    localStorage.setItem('localTasks', JSON.stringify(this.tasks));
    window.location.reload();
  };
  reload = reloadBtn => {
    reloadBtn.addEventListener('click', () => {
      window.location.reload();
    });
  };
  completed = (item, index, descInput) => {
    if (item.checked === true) {
      this.tasks[index].completed = true;
      localStorage.setItem('localTasks', JSON.stringify(this.tasks));
      descInput.classList.add('completed');
    } else {
      this.tasks[index].completed = false;
      localStorage.setItem('localTasks', JSON.stringify(this.tasks));
      descInput.classList.remove('completed');
    }
    window.location.reload();
  };
  completedTasks = () => {
    const checkedIndex = [];
    this.tasks.forEach((completedTask, index) => {
      if (completedTask.completed === true) {
        checkedIndex.push(index);
      }
    });
    return checkedIndex;
  };
  clearAll = checkedIndex => {
    const result = this.tasks.filter((elem, index) => checkedIndex.indexOf(index) === -1);
    this.tasks = result;
    this.fixLength();
    localStorage.setItem('localTasks', JSON.stringify(this.tasks));
    window.location.reload();
  };
}
const task = new Todo();
const display = () => {
  const localTasks = JSON.parse(localStorage.getItem('localTasks'));
  const items = document.querySelector('.items');
  if (localTasks != null) {
    localTasks.forEach(localtask => {
      const tt = {
        desc: localtask.desc,
        completed: localtask.completed,
        index: localtask.index
      };
      task.tasks.push(tt);
      if (localtask.completed === true) {
        items.innerHTML += `<form class='item item${localtask.index}'>
      <div class='item-desc'><div class='check'><input type='checkbox' id='check${localtask.index}' class='checkbox checkbox${localtask.index}' checked></div><input type='text' id='desc${localtask.index}' class='desc completed desc${localtask.index}' value='${localtask.desc}'></div>
      <div class='humberger'><img class='icon-humberger icon-humberger${localtask.index}' src='./img/more.png' alt='humberger'> <img class='icon-trash icon-trash${localtask.index}' src='./img/trash.png' alt='trash'></div>
      </form>`;
      } else {
        items.innerHTML += `<form class='item item${localtask.index}'>
      <div class='item-desc'><div class='check'><input type='checkbox' id='check${localtask.index}' class='checkbox checkbox${localtask.index}'></div><input type='text' id='desc${localtask.index}' class='desc desc${localtask.index}' value='${localtask.desc}'></div>
      <div class='humberger'><img class='icon-humberger icon-humberger${localtask.index}' src='./img/more.png' alt='humberger'> <img class='icon-trash icon-trash${localtask.index}' src='./img/trash.png' alt='trash'></div>
      </form>`;
      }
    });
  }
  const submitButton = document.querySelector('.add-input');
  submitButton.addEventListener('keypress', event => {
    if (event.key === 'Enter') {
      task.addTask(submitButton.value, false, task.tasks.length);
    }
  });

  // Show onclick background
  task.showBG();

  // Delete
  const trashBtn = document.querySelectorAll('.trash-image');
  trashBtn.forEach((trashBtn, index) => {
    trashBtn.addEventListener('click', () => {
      task.deleteItem(index);
    });
  });

  // Edit
  const descInput = document.querySelectorAll('.desc');
  descInput.forEach((desc, index) => {
    desc.addEventListener('keypress', event => {
      if (event.key === 'Enter') {
        task.updateList(desc.value, index);
      }
    });
  });

  // reload
  const reloadBtn = document.querySelector('.reload-image');
  task.reload(reloadBtn);

  // Completed
  const check = document.querySelectorAll('.checkbox');
  check.forEach((item, index) => {
    const descInput = document.querySelector(`.desc${index}`);
    item.addEventListener('change', () => {
      task.completed(item, index, descInput);
    });
  });

  // Clear All
  const btnClear = document.querySelector('.btn-clear');
  const checkedIndex = task.completedTasks();
  btnClear.addEventListener('click', () => {
    task.clearAll(checkedIndex);
  });
};
display();

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ var __webpack_exports__ = (__webpack_exec__("./src/index.js"));
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgubWFpbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLE1BQU1BLElBQUksQ0FBQztFQUNUQyxXQUFXQSxDQUFBLEVBQUc7SUFDWixJQUFJLENBQUNDLEtBQUssR0FBRyxFQUFFO0VBQ2pCO0VBRUFDLElBQUlBLENBQUEsRUFBRztJQUNMQyxZQUFZLENBQUNDLE9BQU8sQ0FBQyxZQUFZLEVBQUVDLElBQUksQ0FBQ0MsU0FBUyxDQUFDLElBQUksQ0FBQ0wsS0FBSyxDQUFDLENBQUM7RUFDaEU7RUFFQU0sT0FBTyxHQUFHQSxDQUFDQyxJQUFJLEVBQUVDLFNBQVMsRUFBRUMsS0FBSyxLQUFLO0lBQ3BDLE1BQU1DLElBQUksR0FBRztNQUNYSCxJQUFJO01BQ0pDLFNBQVM7TUFDVEM7SUFDRixDQUFDO0lBQ0QsSUFBSSxDQUFDVCxLQUFLLENBQUNXLElBQUksQ0FBQ0QsSUFBSSxDQUFDO0lBQ3JCLElBQUksQ0FBQ1QsSUFBSSxDQUFDLENBQUM7SUFDWFcsTUFBTSxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0VBQzFCLENBQUM7RUFFREMsTUFBTSxHQUFHQSxDQUFBLEtBQU07SUFDYixNQUFNQyxTQUFTLEdBQUdDLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsT0FBTyxDQUFDO0lBQ3BERixTQUFTLENBQUNHLE9BQU8sQ0FBQyxDQUFDQyxJQUFJLEVBQUVYLEtBQUssS0FBSztNQUNqQ1csSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsTUFBTTtRQUNuQyxNQUFNQyxXQUFXLEdBQUdMLFFBQVEsQ0FBQ00sYUFBYSxDQUFFLFFBQU9kLEtBQU0sRUFBQyxDQUFDO1FBQzNELE1BQU1lLFVBQVUsR0FBR1AsUUFBUSxDQUFDTSxhQUFhLENBQUUsY0FBYWQsS0FBTSxFQUFDLENBQUM7UUFDaEUsTUFBTWdCLFNBQVMsR0FBR1IsUUFBUSxDQUFDTSxhQUFhLENBQUUsa0JBQWlCZCxLQUFNLEVBQUMsQ0FBQztRQUNuRSxNQUFNaUIsUUFBUSxHQUFHVCxRQUFRLENBQUNNLGFBQWEsQ0FBQyxXQUFXLENBQUM7UUFDcEQsTUFBTUksZ0JBQWdCLEdBQUdWLFFBQVEsQ0FBQ00sYUFBYSxDQUFDLGtCQUFrQixDQUFDO1FBQ25FLE1BQU1LLGFBQWEsR0FBR1gsUUFBUSxDQUFDTSxhQUFhLENBQUMsa0JBQWtCLENBQUM7UUFDaEUsSUFBSUcsUUFBUSxJQUFJLElBQUksRUFBRTtVQUNwQkEsUUFBUSxDQUFDRyxTQUFTLENBQUNDLE1BQU0sQ0FBQyxVQUFVLENBQUM7VUFDckNILGdCQUFnQixDQUFDRSxTQUFTLENBQUNDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQztVQUNwREYsYUFBYSxDQUFDQyxTQUFTLENBQUNDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQztRQUNuRDtRQUNBUixXQUFXLENBQUNPLFNBQVMsQ0FBQ0UsR0FBRyxDQUFDLFVBQVUsQ0FBQztRQUNyQ1AsVUFBVSxDQUFDSyxTQUFTLENBQUNFLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQztRQUMzQ04sU0FBUyxDQUFDSSxTQUFTLENBQUNFLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQztNQUM1QyxDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDO0VBRURDLFNBQVMsR0FBR0EsQ0FBQSxLQUFNO0lBQ2hCLElBQUlDLE1BQU0sR0FBRyxDQUFDO0lBQ2QsSUFBSSxDQUFDakMsS0FBSyxDQUFDbUIsT0FBTyxDQUFFQyxJQUFJLElBQUs7TUFDM0IsSUFBSSxDQUFDQSxJQUFJLENBQUNiLElBQUksR0FBR2EsSUFBSSxDQUFDYixJQUFJO01BQzFCYSxJQUFJLENBQUNYLEtBQUssR0FBR3dCLE1BQU07TUFDbkIsSUFBSSxDQUFDYixJQUFJLENBQUNaLFNBQVMsR0FBR1ksSUFBSSxDQUFDWixTQUFTO01BQ3BDeUIsTUFBTSxJQUFJLENBQUM7SUFDYixDQUFDLENBQUM7RUFDSixDQUFDO0VBRURDLFVBQVUsR0FBSXpCLEtBQUssSUFBSztJQUN0QixJQUFJLENBQUNULEtBQUssR0FBRyxJQUFJLENBQUNBLEtBQUssQ0FBQ21DLE1BQU0sQ0FBQyxDQUFDZixJQUFJLEVBQUVnQixDQUFDLEtBQUtBLENBQUMsS0FBSzNCLEtBQUssQ0FBQztJQUN4RCxJQUFJLENBQUN1QixTQUFTLENBQUMsQ0FBQztJQUNoQjlCLFlBQVksQ0FBQ0MsT0FBTyxDQUFDLFlBQVksRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUMsSUFBSSxDQUFDTCxLQUFLLENBQUMsQ0FBQztJQUM5RFksTUFBTSxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0VBQzFCLENBQUM7RUFFRHVCLFVBQVUsR0FBR0EsQ0FBQzlCLElBQUksRUFBRUUsS0FBSyxLQUFLO0lBQzVCLElBQUksQ0FBQ1QsS0FBSyxDQUFDUyxLQUFLLENBQUMsQ0FBQ0YsSUFBSSxHQUFHQSxJQUFJO0lBQzdCTCxZQUFZLENBQUNDLE9BQU8sQ0FBQyxZQUFZLEVBQUVDLElBQUksQ0FBQ0MsU0FBUyxDQUFDLElBQUksQ0FBQ0wsS0FBSyxDQUFDLENBQUM7SUFDOURZLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLENBQUMsQ0FBQztFQUMxQixDQUFDO0VBRURBLE1BQU0sR0FBSXdCLFNBQVMsSUFBSztJQUN0QkEsU0FBUyxDQUFDakIsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLE1BQU07TUFDeENULE1BQU0sQ0FBQ0MsUUFBUSxDQUFDQyxNQUFNLENBQUMsQ0FBQztJQUMxQixDQUFDLENBQUM7RUFDSixDQUFDO0VBRUROLFNBQVMsR0FBR0EsQ0FBQ1ksSUFBSSxFQUFFWCxLQUFLLEVBQUU4QixTQUFTLEtBQUs7SUFDdEMsSUFBSW5CLElBQUksQ0FBQ29CLE9BQU8sS0FBSyxJQUFJLEVBQUU7TUFDekIsSUFBSSxDQUFDeEMsS0FBSyxDQUFDUyxLQUFLLENBQUMsQ0FBQ0QsU0FBUyxHQUFHLElBQUk7TUFDbENOLFlBQVksQ0FBQ0MsT0FBTyxDQUFDLFlBQVksRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUMsSUFBSSxDQUFDTCxLQUFLLENBQUMsQ0FBQztNQUM5RHVDLFNBQVMsQ0FBQ1YsU0FBUyxDQUFDRSxHQUFHLENBQUMsV0FBVyxDQUFDO0lBQ3RDLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQy9CLEtBQUssQ0FBQ1MsS0FBSyxDQUFDLENBQUNELFNBQVMsR0FBRyxLQUFLO01BQ25DTixZQUFZLENBQUNDLE9BQU8sQ0FBQyxZQUFZLEVBQUVDLElBQUksQ0FBQ0MsU0FBUyxDQUFDLElBQUksQ0FBQ0wsS0FBSyxDQUFDLENBQUM7TUFDOUR1QyxTQUFTLENBQUNWLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLFdBQVcsQ0FBQztJQUN6QztJQUNBbEIsTUFBTSxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0VBQzFCLENBQUM7RUFFRDJCLGNBQWMsR0FBR0EsQ0FBQSxLQUFNO0lBQ3JCLE1BQU1DLFlBQVksR0FBRyxFQUFFO0lBQ3ZCLElBQUksQ0FBQzFDLEtBQUssQ0FBQ21CLE9BQU8sQ0FBQyxDQUFDd0IsYUFBYSxFQUFFbEMsS0FBSyxLQUFLO01BQzNDLElBQUlrQyxhQUFhLENBQUNuQyxTQUFTLEtBQUssSUFBSSxFQUFFO1FBQ3BDa0MsWUFBWSxDQUFDL0IsSUFBSSxDQUFDRixLQUFLLENBQUM7TUFDMUI7SUFDRixDQUFDLENBQUM7SUFDRixPQUFPaUMsWUFBWTtFQUNyQixDQUFDO0VBRURFLFFBQVEsR0FBSUYsWUFBWSxJQUFLO0lBQzNCLE1BQU1HLE1BQU0sR0FBRyxJQUFJLENBQUM3QyxLQUFLLENBQUNtQyxNQUFNLENBQUMsQ0FBQ1csSUFBSSxFQUFFckMsS0FBSyxLQUFLaUMsWUFBWSxDQUFDSyxPQUFPLENBQUN0QyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUNyRixJQUFJLENBQUNULEtBQUssR0FBRzZDLE1BQU07SUFDbkIsSUFBSSxDQUFDYixTQUFTLENBQUMsQ0FBQztJQUNoQjlCLFlBQVksQ0FBQ0MsT0FBTyxDQUFDLFlBQVksRUFBRUMsSUFBSSxDQUFDQyxTQUFTLENBQUMsSUFBSSxDQUFDTCxLQUFLLENBQUMsQ0FBQztJQUM5RFksTUFBTSxDQUFDQyxRQUFRLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0VBQzFCLENBQUM7QUFDSDtBQUVBLE1BQU1KLElBQUksR0FBRyxJQUFJWixJQUFJLENBQUMsQ0FBQztBQUV2QixNQUFNa0QsT0FBTyxHQUFHQSxDQUFBLEtBQU07RUFDcEIsTUFBTUMsVUFBVSxHQUFHN0MsSUFBSSxDQUFDOEMsS0FBSyxDQUFDaEQsWUFBWSxDQUFDaUQsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDO0VBQ2pFLE1BQU1DLEtBQUssR0FBR25DLFFBQVEsQ0FBQ00sYUFBYSxDQUFDLFFBQVEsQ0FBQztFQUU5QyxJQUFJMEIsVUFBVSxJQUFJLElBQUksRUFBRTtJQUN0QkEsVUFBVSxDQUFDOUIsT0FBTyxDQUFFa0MsU0FBUyxJQUFLO01BQ2hDLE1BQU1DLEVBQUUsR0FBRztRQUNUL0MsSUFBSSxFQUFFOEMsU0FBUyxDQUFDOUMsSUFBSTtRQUNwQkMsU0FBUyxFQUFFNkMsU0FBUyxDQUFDN0MsU0FBUztRQUM5QkMsS0FBSyxFQUFFNEMsU0FBUyxDQUFDNUM7TUFDbkIsQ0FBQztNQUNEQyxJQUFJLENBQUNWLEtBQUssQ0FBQ1csSUFBSSxDQUFDMkMsRUFBRSxDQUFDO01BQ25CLElBQUlELFNBQVMsQ0FBQzdDLFNBQVMsS0FBSyxJQUFJLEVBQUU7UUFDaEM0QyxLQUFLLENBQUNHLFNBQVMsSUFBSyx5QkFBd0JGLFNBQVMsQ0FBQzVDLEtBQU07QUFDcEUsa0ZBQWtGNEMsU0FBUyxDQUFDNUMsS0FBTSw2QkFBNEI0QyxTQUFTLENBQUM1QyxLQUFNLDhDQUE2QzRDLFNBQVMsQ0FBQzVDLEtBQU0sK0JBQThCNEMsU0FBUyxDQUFDNUMsS0FBTSxZQUFXNEMsU0FBUyxDQUFDOUMsSUFBSztBQUNuUix3RUFBd0U4QyxTQUFTLENBQUM1QyxLQUFNLDRFQUEyRTRDLFNBQVMsQ0FBQzVDLEtBQU07QUFDbkwsY0FBYztNQUNSLENBQUMsTUFBTTtRQUNMMkMsS0FBSyxDQUFDRyxTQUFTLElBQUsseUJBQXdCRixTQUFTLENBQUM1QyxLQUFNO0FBQ3BFLGtGQUFrRjRDLFNBQVMsQ0FBQzVDLEtBQU0sNkJBQTRCNEMsU0FBUyxDQUFDNUMsS0FBTSxzQ0FBcUM0QyxTQUFTLENBQUM1QyxLQUFNLHFCQUFvQjRDLFNBQVMsQ0FBQzVDLEtBQU0sWUFBVzRDLFNBQVMsQ0FBQzlDLElBQUs7QUFDalEsd0VBQXdFOEMsU0FBUyxDQUFDNUMsS0FBTSw0RUFBMkU0QyxTQUFTLENBQUM1QyxLQUFNO0FBQ25MLGNBQWM7TUFDUjtJQUNGLENBQUMsQ0FBQztFQUNKO0VBRUEsTUFBTStDLFlBQVksR0FBR3ZDLFFBQVEsQ0FBQ00sYUFBYSxDQUFDLFlBQVksQ0FBQztFQUN6RGlDLFlBQVksQ0FBQ25DLGdCQUFnQixDQUFDLFVBQVUsRUFBR29DLEtBQUssSUFBSztJQUNuRCxJQUFJQSxLQUFLLENBQUNDLEdBQUcsS0FBSyxPQUFPLEVBQUU7TUFDekJoRCxJQUFJLENBQUNKLE9BQU8sQ0FBQ2tELFlBQVksQ0FBQ0csS0FBSyxFQUFFLEtBQUssRUFBRWpELElBQUksQ0FBQ1YsS0FBSyxDQUFDNEQsTUFBTSxDQUFDO0lBQzVEO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0FsRCxJQUFJLENBQUNLLE1BQU0sQ0FBQyxDQUFDOztFQUViO0VBQ0EsTUFBTThDLFFBQVEsR0FBRzVDLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsY0FBYyxDQUFDO0VBQzFEMkMsUUFBUSxDQUFDMUMsT0FBTyxDQUFDLENBQUMwQyxRQUFRLEVBQUVwRCxLQUFLLEtBQUs7SUFDcENvRCxRQUFRLENBQUN4QyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsTUFBTTtNQUN2Q1gsSUFBSSxDQUFDd0IsVUFBVSxDQUFDekIsS0FBSyxDQUFDO0lBQ3hCLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQzs7RUFFRjtFQUNBLE1BQU04QixTQUFTLEdBQUd0QixRQUFRLENBQUNDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQztFQUNwRHFCLFNBQVMsQ0FBQ3BCLE9BQU8sQ0FBQyxDQUFDWixJQUFJLEVBQUVFLEtBQUssS0FBSztJQUNqQ0YsSUFBSSxDQUFDYyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUdvQyxLQUFLLElBQUs7TUFDM0MsSUFBSUEsS0FBSyxDQUFDQyxHQUFHLEtBQUssT0FBTyxFQUFFO1FBQ3pCaEQsSUFBSSxDQUFDMkIsVUFBVSxDQUFDOUIsSUFBSSxDQUFDb0QsS0FBSyxFQUFFbEQsS0FBSyxDQUFDO01BQ3BDO0lBQ0YsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDOztFQUVGO0VBQ0EsTUFBTTZCLFNBQVMsR0FBR3JCLFFBQVEsQ0FBQ00sYUFBYSxDQUFDLGVBQWUsQ0FBQztFQUN6RGIsSUFBSSxDQUFDSSxNQUFNLENBQUN3QixTQUFTLENBQUM7O0VBRXRCO0VBQ0EsTUFBTXdCLEtBQUssR0FBRzdDLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsV0FBVyxDQUFDO0VBQ3BENEMsS0FBSyxDQUFDM0MsT0FBTyxDQUFDLENBQUNDLElBQUksRUFBRVgsS0FBSyxLQUFLO0lBQzdCLE1BQU04QixTQUFTLEdBQUd0QixRQUFRLENBQUNNLGFBQWEsQ0FBRSxRQUFPZCxLQUFNLEVBQUMsQ0FBQztJQUN6RFcsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsTUFBTTtNQUNwQ1gsSUFBSSxDQUFDRixTQUFTLENBQUNZLElBQUksRUFBRVgsS0FBSyxFQUFFOEIsU0FBUyxDQUFDO0lBQ3hDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQzs7RUFFRjtFQUNBLE1BQU13QixRQUFRLEdBQUc5QyxRQUFRLENBQUNNLGFBQWEsQ0FBQyxZQUFZLENBQUM7RUFDckQsTUFBTW1CLFlBQVksR0FBR2hDLElBQUksQ0FBQytCLGNBQWMsQ0FBQyxDQUFDO0VBQzFDc0IsUUFBUSxDQUFDMUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLE1BQU07SUFDdkNYLElBQUksQ0FBQ2tDLFFBQVEsQ0FBQ0YsWUFBWSxDQUFDO0VBQzdCLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRE0sT0FBTyxDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b19kb19saXN0X3Byb2plY3QvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgVG9kbyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGFza3MgPSBbXTtcbiAgfVxuXG4gIHNhdmUoKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xvY2FsVGFza3MnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnRhc2tzKSk7XG4gIH1cblxuICBhZGRUYXNrID0gKGRlc2MsIGNvbXBsZXRlZCwgaW5kZXgpID0+IHtcbiAgICBjb25zdCB0YXNrID0ge1xuICAgICAgZGVzYyxcbiAgICAgIGNvbXBsZXRlZCxcbiAgICAgIGluZGV4LFxuICAgIH07XG4gICAgdGhpcy50YXNrcy5wdXNoKHRhc2spO1xuICAgIHRoaXMuc2F2ZSgpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfTtcblxuICBzaG93QkcgPSAoKSA9PiB7XG4gICAgY29uc3QgaW5wdXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0nKTtcbiAgICBpbnB1dEZvcm0uZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLml0ZW0ke2luZGV4fWApO1xuICAgICAgICBjb25zdCB0cmFzaEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmljb24tdHJhc2gke2luZGV4fWApO1xuICAgICAgICBjb25zdCBtb3JlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuaWNvbi1odW1iZXJnZXIke2luZGV4fWApO1xuICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZCcpO1xuICAgICAgICBjb25zdCB0cmFzaEltYWdlQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmljb24tdHJhc2gtc2hvdycpO1xuICAgICAgICBjb25zdCBtb3JlSW1hZ2VIaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vcmUtaW1hZ2UtaGlkZScpO1xuICAgICAgICBpZiAoc2VsZWN0ZWQgIT0gbnVsbCkge1xuICAgICAgICAgIHNlbGVjdGVkLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgdHJhc2hJbWFnZUFjdGl2ZS5jbGFzc0xpc3QucmVtb3ZlKCdpY29uLXRyYXNoLXNob3cnKTtcbiAgICAgICAgICBtb3JlSW1hZ2VIaWRlLmNsYXNzTGlzdC5yZW1vdmUoJ21vcmUtaW1hZ2UtaGlkZScpO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW1Db250ZW50LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgIHRyYXNoSW1hZ2UuY2xhc3NMaXN0LmFkZCgnaWNvbi10cmFzaC1zaG93Jyk7XG4gICAgICAgIG1vcmVJbWFnZS5jbGFzc0xpc3QuYWRkKCdtb3JlLWltYWdlLWhpZGUnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZml4TGVuZ3RoID0gKCkgPT4ge1xuICAgIGxldCBsZW5naHQgPSAwO1xuICAgIHRoaXMudGFza3MuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmRlc2MgPSBpdGVtLmRlc2M7XG4gICAgICBpdGVtLmluZGV4ID0gbGVuZ2h0O1xuICAgICAgdGhpcy5pdGVtLmNvbXBsZXRlZCA9IGl0ZW0uY29tcGxldGVkO1xuICAgICAgbGVuZ2h0ICs9IDE7XG4gICAgfSk7XG4gIH1cblxuICBkZWxldGVJdGVtID0gKGluZGV4KSA9PiB7XG4gICAgdGhpcy50YXNrcyA9IHRoaXMudGFza3MuZmlsdGVyKChpdGVtLCBpKSA9PiBpICE9PSBpbmRleCk7XG4gICAgdGhpcy5maXhMZW5ndGgoKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9jYWxUYXNrcycsIEpTT04uc3RyaW5naWZ5KHRoaXMudGFza3MpKTtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gIH07XG5cbiAgdXBkYXRlTGlzdCA9IChkZXNjLCBpbmRleCkgPT4ge1xuICAgIHRoaXMudGFza3NbaW5kZXhdLmRlc2MgPSBkZXNjO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2NhbFRhc2tzJywgSlNPTi5zdHJpbmdpZnkodGhpcy50YXNrcykpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxuXG4gIHJlbG9hZCA9IChyZWxvYWRCdG4pID0+IHtcbiAgICByZWxvYWRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfSk7XG4gIH1cblxuICBjb21wbGV0ZWQgPSAoaXRlbSwgaW5kZXgsIGRlc2NJbnB1dCkgPT4ge1xuICAgIGlmIChpdGVtLmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgIHRoaXMudGFza3NbaW5kZXhdLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9jYWxUYXNrcycsIEpTT04uc3RyaW5naWZ5KHRoaXMudGFza3MpKTtcbiAgICAgIGRlc2NJbnB1dC5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50YXNrc1tpbmRleF0uY29tcGxldGVkID0gZmFsc2U7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9jYWxUYXNrcycsIEpTT04uc3RyaW5naWZ5KHRoaXMudGFza3MpKTtcbiAgICAgIGRlc2NJbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcbiAgICB9XG4gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICB9O1xuXG4gIGNvbXBsZXRlZFRhc2tzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrZWRJbmRleCA9IFtdO1xuICAgIHRoaXMudGFza3MuZm9yRWFjaCgoY29tcGxldGVkVGFzaywgaW5kZXgpID0+IHtcbiAgICAgIGlmIChjb21wbGV0ZWRUYXNrLmNvbXBsZXRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICBjaGVja2VkSW5kZXgucHVzaChpbmRleCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGNoZWNrZWRJbmRleDtcbiAgfVxuXG4gIGNsZWFyQWxsID0gKGNoZWNrZWRJbmRleCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMudGFza3MuZmlsdGVyKChlbGVtLCBpbmRleCkgPT4gY2hlY2tlZEluZGV4LmluZGV4T2YoaW5kZXgpID09PSAtMSk7XG4gICAgdGhpcy50YXNrcyA9IHJlc3VsdDtcbiAgICB0aGlzLmZpeExlbmd0aCgpO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2NhbFRhc2tzJywgSlNPTi5zdHJpbmdpZnkodGhpcy50YXNrcykpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgfVxufVxuXG5jb25zdCB0YXNrID0gbmV3IFRvZG8oKTtcblxuY29uc3QgZGlzcGxheSA9ICgpID0+IHtcbiAgY29uc3QgbG9jYWxUYXNrcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvY2FsVGFza3MnKSk7XG4gIGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLml0ZW1zJyk7XG5cbiAgaWYgKGxvY2FsVGFza3MgIT0gbnVsbCkge1xuICAgIGxvY2FsVGFza3MuZm9yRWFjaCgobG9jYWx0YXNrKSA9PiB7XG4gICAgICBjb25zdCB0dCA9IHtcbiAgICAgICAgZGVzYzogbG9jYWx0YXNrLmRlc2MsXG4gICAgICAgIGNvbXBsZXRlZDogbG9jYWx0YXNrLmNvbXBsZXRlZCxcbiAgICAgICAgaW5kZXg6IGxvY2FsdGFzay5pbmRleCxcbiAgICAgIH07XG4gICAgICB0YXNrLnRhc2tzLnB1c2godHQpO1xuICAgICAgaWYgKGxvY2FsdGFzay5jb21wbGV0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgaXRlbXMuaW5uZXJIVE1MICs9IGA8Zm9ybSBjbGFzcz0naXRlbSBpdGVtJHtsb2NhbHRhc2suaW5kZXh9Jz5cbiAgICAgIDxkaXYgY2xhc3M9J2l0ZW0tZGVzYyc+PGRpdiBjbGFzcz0nY2hlY2snPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9J2NoZWNrJHtsb2NhbHRhc2suaW5kZXh9JyBjbGFzcz0nY2hlY2tib3ggY2hlY2tib3gke2xvY2FsdGFzay5pbmRleH0nIGNoZWNrZWQ+PC9kaXY+PGlucHV0IHR5cGU9J3RleHQnIGlkPSdkZXNjJHtsb2NhbHRhc2suaW5kZXh9JyBjbGFzcz0nZGVzYyBjb21wbGV0ZWQgZGVzYyR7bG9jYWx0YXNrLmluZGV4fScgdmFsdWU9JyR7bG9jYWx0YXNrLmRlc2N9Jz48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9J2h1bWJlcmdlcic+PGltZyBjbGFzcz0naWNvbi1odW1iZXJnZXIgaWNvbi1odW1iZXJnZXIke2xvY2FsdGFzay5pbmRleH0nIHNyYz0nLi9pbWcvbW9yZS5wbmcnIGFsdD0naHVtYmVyZ2VyJz4gPGltZyBjbGFzcz0naWNvbi10cmFzaCBpY29uLXRyYXNoJHtsb2NhbHRhc2suaW5kZXh9JyBzcmM9Jy4vaW1nL3RyYXNoLnBuZycgYWx0PSd0cmFzaCc+PC9kaXY+XG4gICAgICA8L2Zvcm0+YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1zLmlubmVySFRNTCArPSBgPGZvcm0gY2xhc3M9J2l0ZW0gaXRlbSR7bG9jYWx0YXNrLmluZGV4fSc+XG4gICAgICA8ZGl2IGNsYXNzPSdpdGVtLWRlc2MnPjxkaXYgY2xhc3M9J2NoZWNrJz48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGlkPSdjaGVjayR7bG9jYWx0YXNrLmluZGV4fScgY2xhc3M9J2NoZWNrYm94IGNoZWNrYm94JHtsb2NhbHRhc2suaW5kZXh9Jz48L2Rpdj48aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J2Rlc2Mke2xvY2FsdGFzay5pbmRleH0nIGNsYXNzPSdkZXNjIGRlc2Mke2xvY2FsdGFzay5pbmRleH0nIHZhbHVlPScke2xvY2FsdGFzay5kZXNjfSc+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPSdodW1iZXJnZXInPjxpbWcgY2xhc3M9J2ljb24taHVtYmVyZ2VyIGljb24taHVtYmVyZ2VyJHtsb2NhbHRhc2suaW5kZXh9JyBzcmM9Jy4vaW1nL21vcmUucG5nJyBhbHQ9J2h1bWJlcmdlcic+IDxpbWcgY2xhc3M9J2ljb24tdHJhc2ggaWNvbi10cmFzaCR7bG9jYWx0YXNrLmluZGV4fScgc3JjPScuL2ltZy90cmFzaC5wbmcnIGFsdD0ndHJhc2gnPjwvZGl2PlxuICAgICAgPC9mb3JtPmA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWlucHV0Jyk7XG4gIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgIHRhc2suYWRkVGFzayhzdWJtaXRCdXR0b24udmFsdWUsIGZhbHNlLCB0YXNrLnRhc2tzLmxlbmd0aCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBTaG93IG9uY2xpY2sgYmFja2dyb3VuZFxuICB0YXNrLnNob3dCRygpO1xuXG4gIC8vIERlbGV0ZVxuICBjb25zdCB0cmFzaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50cmFzaC1pbWFnZScpO1xuICB0cmFzaEJ0bi5mb3JFYWNoKCh0cmFzaEJ0biwgaW5kZXgpID0+IHtcbiAgICB0cmFzaEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRhc2suZGVsZXRlSXRlbShpbmRleCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIEVkaXRcbiAgY29uc3QgZGVzY0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRlc2MnKTtcbiAgZGVzY0lucHV0LmZvckVhY2goKGRlc2MsIGluZGV4KSA9PiB7XG4gICAgZGVzYy5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICB0YXNrLnVwZGF0ZUxpc3QoZGVzYy52YWx1ZSwgaW5kZXgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICAvLyByZWxvYWRcbiAgY29uc3QgcmVsb2FkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlbG9hZC1pbWFnZScpO1xuICB0YXNrLnJlbG9hZChyZWxvYWRCdG4pO1xuXG4gIC8vIENvbXBsZXRlZFxuICBjb25zdCBjaGVjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGVja2JveCcpO1xuICBjaGVjay5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgIGNvbnN0IGRlc2NJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kZXNjJHtpbmRleH1gKTtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIHRhc2suY29tcGxldGVkKGl0ZW0sIGluZGV4LCBkZXNjSW5wdXQpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBDbGVhciBBbGxcbiAgY29uc3QgYnRuQ2xlYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLWNsZWFyJyk7XG4gIGNvbnN0IGNoZWNrZWRJbmRleCA9IHRhc2suY29tcGxldGVkVGFza3MoKTtcbiAgYnRuQ2xlYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdGFzay5jbGVhckFsbChjaGVja2VkSW5kZXgpO1xuICB9KTtcbn07XG5cbmRpc3BsYXkoKTsiXSwibmFtZXMiOlsiVG9kbyIsImNvbnN0cnVjdG9yIiwidGFza3MiLCJzYXZlIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhZGRUYXNrIiwiZGVzYyIsImNvbXBsZXRlZCIsImluZGV4IiwidGFzayIsInB1c2giLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInNob3dCRyIsImlucHV0Rm9ybSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpdGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsIml0ZW1Db250ZW50IiwicXVlcnlTZWxlY3RvciIsInRyYXNoSW1hZ2UiLCJtb3JlSW1hZ2UiLCJzZWxlY3RlZCIsInRyYXNoSW1hZ2VBY3RpdmUiLCJtb3JlSW1hZ2VIaWRlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwiZml4TGVuZ3RoIiwibGVuZ2h0IiwiZGVsZXRlSXRlbSIsImZpbHRlciIsImkiLCJ1cGRhdGVMaXN0IiwicmVsb2FkQnRuIiwiZGVzY0lucHV0IiwiY2hlY2tlZCIsImNvbXBsZXRlZFRhc2tzIiwiY2hlY2tlZEluZGV4IiwiY29tcGxldGVkVGFzayIsImNsZWFyQWxsIiwicmVzdWx0IiwiZWxlbSIsImluZGV4T2YiLCJkaXNwbGF5IiwibG9jYWxUYXNrcyIsInBhcnNlIiwiZ2V0SXRlbSIsIml0ZW1zIiwibG9jYWx0YXNrIiwidHQiLCJpbm5lckhUTUwiLCJzdWJtaXRCdXR0b24iLCJldmVudCIsImtleSIsInZhbHVlIiwibGVuZ3RoIiwidHJhc2hCdG4iLCJjaGVjayIsImJ0bkNsZWFyIl0sInNvdXJjZVJvb3QiOiIifQ==